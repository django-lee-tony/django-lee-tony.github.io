<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>移动端常见问题处理 | django </title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://django-lee-tony.github.io/favicon.ico?v=1612526693061">
<link rel="stylesheet" href="https://django-lee-tony.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="
title: 移动端常见问题处理
date: 2021-02-04 16:21:01
tags:
本文将详细介绍移动web开发中的常见问题
移动端常见问题处理
input
【光标颜色】
默认情况下，光标颜色与字体颜色color相同，但也可..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://django-lee-tony.github.io">
        <img src="https://django-lee-tony.github.io/images/avatar.png?v=1612526693061" class="site-logo">
        <h1 class="site-title">django </h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="https://django-lee-tony.github.io" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://django-lee-tony.github.io/post/websocket-feng-zhuang-zai-vuex-zhong" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://django-lee-tony.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">移动端常见问题处理</h2>
            <div class="post-date">2021-02-05</div>
            
            <div class="post-content" v-pre>
              <hr>
<h2 id="title-移动端常见问题处理date-2021-02-04-162101tags">title: 移动端常见问题处理<br>
date: 2021-02-04 16:21:01<br>
tags:</h2>
<h1 id="本文将详细介绍移动web开发中的常见问题">本文将详细介绍移动web开发中的常见问题</h1>
<h1 id="移动端常见问题处理">移动端常见问题处理</h1>
<h2 id="input">input</h2>
<h3 id="光标颜色">【光标颜色】</h3>
<p>默认情况下，光标颜色与字体颜色color相同，但也可以通过caret-color属性来单独设置</p>
<pre><code class="language-$xslt">caret-color: auto;
caret-color: transparent;
caret-color: currentColor;
caret-color: red;
caret-color: #5729e9;
caret-color: rgb(0, 200, 0);
caret-color: hsla(228, 4%, 24%, 0.8);
//但是，IOS的光标不支持caret-color，与字体颜色无关，默认为紫蓝色。所以，尽量不要设置蓝色或紫色背景，否则光标看不清楚
</code></pre>
<h3 id="光标高度">【光标高度】</h3>
<p>input域的光标高度与行高line-height相同，所以不要设置太高的行高，可以通过设置上下padding来撑开高度</p>
<pre><code class="language-$xslt">input{
line-height:20px; 
padding:15px;
}
</code></pre>
<h3 id="放大">【放大】</h3>
<p>IOS下，input获取焦点时会放大，meta设置user-scalable=no，可取消放大效果</p>
<pre><code class="language-$xslt">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no&quot;&gt;
</code></pre>
<h3 id="自动大写">【自动大写】</h3>
<p>一般地，IOS下默认开启键盘的首字母自动大写功能，这样输入英文的时候，首字母便会自动大写<br>
 但是，有些时候并不希望一直是首字母大写的。比如用户名这个字段，如果字段本身就是区分大小写的，首字母自动大写往往会给用户带来麻烦。可以通过在表单元素上可以通过设置autocapitalize=&quot;off&quot;来关闭</p>
<pre><code class="language-$xslt"> &lt;input type=&quot;text&quot; autocapitalize=&quot;off&quot;&gt;
</code></pre>
<h3 id="圆角">【圆角】</h3>
<p>IOS下，input域只显示底边框时，会出现两个底部底边圆角效果，设置border-radius:0即可</p>
<pre><code class="language-$xslt">border-radius:0
</code></pre>
<h3 id="自动保存">【自动保存】</h3>
<p>input域默认会开启自动保存功能，可以使用autocomplete=&quot;off&quot;属性将其关闭</p>
<pre><code class="language-$xslt">&lt;input autocomplete=&quot;off&quot; /&gt; //要特别注意的是，如果使用react框架，需要将autocomplete替换为autoComplete这种小驼峰形式
</code></pre>
<h3 id="轮廓outline">【轮廓outline】</h3>
<p>android浏览器下，input域处于焦点状态时，默认会有一圈淡黄色的轮廓outline效果<br>
通过设置outline:none可将其去除</p>
<pre><code class="language-$xslt">outline: none
</code></pre>
<h3 id="虚拟键盘">【虚拟键盘】</h3>
<p>IOS弹出虚拟键盘不影响可视区域大小，而android手机弹出虚拟键盘时会影响。<br>
所以，最好将包含input域的页面高度设为固定在页面初始化时，获取页面高度</p>
<pre><code class="language-$xslt">// app.js
  componentDidMount() {
    const { setWrapSize } = this.props
    const { clientHeight, clientWidth } = document.documentElement
    setWrapSize({ clientHeight, clientWidth })
    window.addEventListener('orientationchange', this.setSize)
  }
 然后通过行间样式，将此高度设置到包含input域的页面上
// BaseFullScreen
&lt;Wrap className={className} style={{ height: `${wrapHeight}px` }} {...rest}&gt;{children}&lt;/Wrap&gt;
</code></pre>
<h2 id="样式">样式</h2>
<h3 id="点击背景">【点击背景】</h3>
<p>在移动端，点击可点击元素时，android下会出现淡蓝色背景，IOS下会出现灰色背景<br>
可以通过-webkt-tap-hightlight-color属性的设置，取消点击时出现的背景效果</p>
<pre><code class="language-$xslt">* {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
</code></pre>
<h3 id="appearance">【appearance】</h3>
<p>使用appearance:none主要用来去除表单类元素的中浏览器内置样式，如去除data类型input域的叉叉，去除number类型input域的上下箭头等</p>
<pre><code class="language-$xslt">input[type=number]{
  -webkit-appearance: none;
}
</code></pre>
<h3 id="禁止选中">【禁止选中】</h3>
<p>有时不希望用户在网站上选择文本，或许是出于版权的原因，如电子书网站。通常使用js来实现<br>
另一个方案就是，将-webkit-user-select设为none</p>
<pre><code class="language-$xslt">-webkit-user-select：none;
但是此方法在safari有兼容性 会导致输入框光标消失
//最终的解决方案 
body:not(input,textarea) {
  -webkit-user-select: none;
  -moz-user-select: none;
  -khtml-user-select: none;
  user-select: none;
}
input, textarea {
  -webkit-user-select: auto !important;
  -khtml-user-select: auto !important;
  -moz-user-select: auto !important;
  -ms-user-select: auto !important;
  -o-user-select: auto !important;
  user-select: auto !important;
}
</code></pre>
<h3 id="禁止文字缩放">【禁止文字缩放】</h3>
<p>部分手机上，切换横竖屏时，会缩放字体。使用如下设置，可以禁止文字缩放</p>
<pre><code class="language-$xslt">* {
  -webkit-text-size-adjust:100%;
}
</code></pre>
<h3 id="文本渲染">【文本渲染】</h3>
<p>使用text-rendering:optimizeLegibility属性，<br>
可以让浏览器在绘制文本时将着重考虑易读性，而不是渲染速度和几何精度.它会使字间距和连字有效</p>
<pre><code>text-rendering: optimizeLegibility; //该属性在移动设备上会造成比较明显的性能问题
</code></pre>
<h3 id="文本平滑显示">【文本平滑显示】</h3>
<p>-webkit-font-smoothing属性可以用来控制字体的像素显示是否平滑</p>
<pre><code class="language-$xslt">none 关闭抗锯齿，字体边缘犀利。
antialiased 字体像素级平滑，在深色背景上会让文字看起来更细了
subpixel-antialiased 字体亚像素级平滑，主要为了在非视网膜设备下更好的显示
body { -webkit-font-smoothing: antialiased; }
</code></pre>
<h3 id="滚动回弹">【滚动回弹】</h3>
<p>-webkit-overflow-scrolling 属性控制元素在移动设备上是否使用滚动回弹效果</p>
<pre><code class="language-$xslt">auto 使用普通滚动, 当手指从触摸屏上移开，滚动会立即停止
touch 使用具有回弹效果的滚动, 当手指从触摸屏上移开，内容会继续保持一段时间的滚动效果。
        继续滚动的速度和持续的时间和滚动手势的强烈程度成正比。同时也会创建一个新的堆栈上下文
body {
  -webkit-overflow-scrolling: touch;
}
一定要设置该属性，否则在IOS下会出现局部滚动不流畅的bug
</code></pre>
<h3 id="1倍行高">【1倍行高】</h3>
<p>设置line-height:1，即行高为1时，有的页面会出现文字显示不全的情况，所以行高设置一定要大于1</p>
<h3 id="1像素边框">【1像素边框】</h3>
<p>由于retina屏的原因，1px 的 border 会显示成两个物理像素，所以看起来会感觉很粗，这是一个移动端开发常见的问题<br>
解决方案有很多，但都有自己的优缺点<br>
1、0.5px 边框<br>
  从iOS 8开始，iOS 浏览器支持 0.5px 的 border，但是在 Android 上是不支持的，0.5px 会被认为是 0px，所以这种方法，兼容性很差<br>
2、背景渐变<br>
  CSS3 有了渐变背景，可以通过渐变背景实现 1px 的 border，实现原理是设置 1px 的渐变背景，50% 有颜色，50% 是透明的<br>
<code>@mixin commonStyle() { background-size: 100% 1px,1px 100% ,100% 1px, 1px 100%; background-repeat: no-repeat; background-position: top, right top, bottom, left top; } @mixin border($border-color) { @include commonStyle(); background-image:linear-gradient(180deg, $border-color, $border-color 50%, transparent 50%), linear-gradient(270deg, $border-color, $border-color 50%, transparent 50%), linear-gradient(0deg, $border-color, $border-color 50%, transparent 50%), linear-gradient(90deg, $border-color, $border-color 50%, transparent 50%); }</code><br>
3、伪类 + transform<br>
这类方法的实现原理是用伪元素高度设置为1px，然后用 transform缩小到原来的一半<br>
<code>div { position: relative; &amp;::after { position: absolute; left: 0; right: 0; height: 1px; transform: scaleY(.5); content: ''; }</code></p>
<h3 id="页面放大">【页面放大】</h3>
<p>在移动端页面双击 或者使用手指缩放的时候 页面会跟随方法缩小 体验性较差<br>
解决方案</p>
<pre><code class="language-$xslt">&lt;!--    强制让文档的宽度与设备的宽度保持1:1，并且文档最大的宽度比例是1.0，且不允许用户点击屏幕放大浏览。--&gt;
   &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover&quot;&gt;
//但是此方法在safari上还是会有一定的兼容性 依旧会放大 此时应使用js控制
   document.addEventListener('gesturestart', function(event) {
     event.preventDefault();
   });

</code></pre>
<h3 id="浏览器左右滑动">【浏览器左右滑动】</h3>
<pre><code>通常用户在浏览器左右滑动时 页面会返回到上一层页面 或者出现退出的情况   体验比较差
```$xslt
var startX,startY;
    document.addEventListener(&quot;touchstart&quot;,function(e){
      startX = e.targetTouches[0].pageX;
      startY = e.targetTouches[0].pageY;
    });
    document.addEventListener(&quot;touchmove&quot;,function(e){
      // e.preventDefault();
      var moveX = e.targetTouches[0].pageX;
      var moveY = e.targetTouches[0].pageY;

      if(Math.abs(moveX-startX)&gt;Math.abs(moveY-startY)){
        e.preventDefault();
      }
    },{passive:false});

```
</code></pre>
<h2 id="布局">布局</h2>
<h3 id="vh">【vh】</h3>
<p>页面使用vh来控制元素高度的时候，在安卓端浏览器虚拟键盘弹出时，导致视口高度改变，以至于vh的取值改变 在safari也有一定的兼容性</p>
<pre><code class="language-$xslt">   // 正常模式下
   100vh = document.documentElement.clientHeight;
   // 安卓端弹出虚拟键盘情况下
   100vh = document.documentElement.clientHeight - 虚拟键盘的高度;
   //在safari上 如果先隐藏地址栏 再开启地址栏时 页面高度同样会计算错误  
   所以页面应避免使用100vh
</code></pre>
<h2 id="浏览器">浏览器</h2>
<h3 id="添加到主屏幕">【添加到主屏幕】</h3>
<p>在IOS下，在head元素底部，使用下列代码可以实现添加到主屏幕的功能</p>
<pre><code class="language-$xslt"> &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;
  &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot;&gt;
  &lt;meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;Weather PWA&quot;&gt;
  &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;images/icons/icon-152x152.png&quot;&gt;
</code></pre>
<h3 id="qq浏览器">【QQ浏览器】</h3>
<pre><code class="language-$xslt">// 全屏模式
&lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot;&gt;
// 强制竖屏
&lt;meta name=&quot;x5-orientation&quot; content=&quot;portrait&quot;&gt;
// 强制横屏
&lt;meta name=&quot;x5-orientation&quot; content=&quot;landscape&quot;&gt;
// 应用模式
&lt;meta name=&quot;x5-page-mode&quot; content=&quot;app&quot;&gt;
</code></pre>
<h3 id="uc浏览器">【UC浏览器】</h3>
<pre><code class="language-$xslt">// 全屏模式
&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt;
// 强制竖屏
&lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot;&gt;
// 强制横屏
&lt;meta name=&quot;screen-orientation&quot; content=&quot;landscape&quot;&gt;
// 应用模式
&lt;meta name=&quot;browsermode&quot; content=&quot;application&quot;&gt;
</code></pre>

            </div>
            
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
